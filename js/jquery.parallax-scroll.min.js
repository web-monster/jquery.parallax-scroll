$(function(){ParallaxScroll.init()});var ParallaxScroll={showLogs:!1,round:1e3,init:function(){if(this._log("init"),this._inited)return this._log("Already Inited"),void(this._inited=!0);this._onScroll(!0)},_RAF:null,_running:0,_inited:!1,_properties:["x","y","z","rotateX","rotateY","rotateZ","scaleX","scaleY","scaleZ","scale"],_log:function(a){this.showLogs&&console.log("Parallax Scroll / "+a)},_stop:function(){window.cancelAnimationFrame(this._RAF)},_onScroll:function(Y){this._running=0;var Z=$(document).scrollTop(),S=$(window).height();this._log("onScroll "+Z),$("[data-parallax]").each($.proxy(function(a,l){var o=$(l),i=[],c=!1,t=o.data("style");null==t&&(t=o.attr("style")||"",o.data("style",t));var n,e=[o.data("parallax")];for(n=2;o.data("parallax"+n);n++)e.push(o.data("parallax-"+n));var s=e.length;for(n=0;n<s;n++){var u=e[n],d=u["from-scroll"];null==d&&(d=Math.max(0,$(l).offset().top-S)),d|=0;var r=u.distance,h=u["to-scroll"];null==r&&null==h&&(r=S),r=Math.max(0|r,1);var v=u.easing,g=u["easing-return"];if(null!=v&&$.easing&&$.easing[v]||(v=null),null!=g&&$.easing&&$.easing[g]||(g=v),v){var _=u.duration;null==_&&(_=r),_=Math.max(0|_,1);var p=u["duration-return"];null==p&&(p=_),r=1;var f=o.data("current-time");null==f&&(f=0)}null==h&&(h=d+r),h|=0;var x=u.smoothness;null==x&&(x=30),x|=0,(Y||0==x)&&(x=1),x|=0;var m=Z;m=Math.max(m,d),m=Math.min(m,h),v&&(null==o.data("sens")&&o.data("sens","back"),d<m&&("back"==o.data("sens")?(f=1,o.data("sens","go")):f++),m<h&&("go"==o.data("sens")?(f=1,o.data("sens","back")):f++),Y&&(f=_),o.data("current-time",f)),this._properties.map($.proxy(function(a){var l=0,t=u[a];if(null!=t){"scale"==a||"scaleX"==a||"scaleY"==a||"scaleZ"==a?l=1:t|=0;var n=o.data("_"+a);null==n&&(n=l);var e=(m-d)/(h-d)*(t-l)+l,s=n+(e-n)/x;if(v&&0<f&&f<=_){var r=l;"back"==o.data("sens")&&(t=-(r=t),v=g,_=p),s=$.easing[v](null,f,r,t,_)}(s=Math.ceil(s*this.round)/this.round)==n&&e==t&&(s=t),i[a]||(i[a]=0),i[a]+=s,n!=i[a]&&(o.data("_"+a,i[a]),c=!0)}},this))}if(c){if(this._running++,null!=i.z){var y=u.perspective;null==y&&(y=800);var w=o.parent();w.data("style")||w.data("style",w.attr("style")||""),w.attr("style","perspective:"+y+"vh; -webkit-perspective:"+y+"vh; "+w.data("style"))}null==i.scaleX&&(i.scaleX=1),null==i.scaleY&&(i.scaleY=1),null==i.scaleZ&&(i.scaleZ=1),null!=i.scale&&(i.scaleX*=i.scale,i.scaleY*=i.scale,i.scaleZ*=i.scale);var X="translate3d("+(i.x?i.x:0)+"vh, "+(i.y?i.y:0)+"vh, "+(i.z?i.z:0)+"vh)"+" "+("rotateX("+(i.rotateX?i.rotateX:0)+"deg) rotateY("+(i.rotateY?i.rotateY:0)+"deg) rotateZ("+(i.rotateZ?i.rotateZ:0)+"deg)")+" "+("scaleX("+i.scaleX+") scaleY("+i.scaleY+") scaleZ("+i.scaleZ+")")+";";this._log(X),o.attr("style","transform:"+X+" -webkit-transform:"+X+" "+t)}},this)),0!==this._running?this._RAF=window.requestAnimationFrame($.proxy(this._onScroll,this,!1)):this._stop()}};$(window).on("scroll",function(){ParallaxScroll._running||ParallaxScroll._onScroll()});